<?php

namespace App\Http\Fetcher;

use App\Models\Settings;
use Illuminate\Support\Facades\Http;

class ClickUpFetcher
{
    public static function getTeam()
    {
        return json_decode('{"id":"1230141","name":"Zerda Digital\'s Team","color":"#40BC86","avatar":"https://attachments2.clickup.com/team_avatars/6b7d406d-c3b1-402d-b26e-7d2cd5c5341c.blob?Expires=1648684800&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9hdHRhY2htZW50czIuY2xpY2t1cC5jb20vdGVhbV9hdmF0YXJzLzZiN2Q0MDZkLWMzYjEtNDAyZC1iMjZlLTdkMmNkNWM1MzQxYy5ibG9iIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNjQ4Njg0ODAwfX19XX0_&Signature=GVlqO1EqtHlZTgmOcBSZupEDc39VvTDuMhfNuI-kjkiy3OY2xiySFJHj65ZSLlQlyw0VtgTrb85LH5qiEI7MdKfadOl8WAvz8xx88eS~L4QWPTiJ1EuyO2g7LwwLXqj27SyAam-dNOdYaRT8UQgYUiYSnLvYytlnJ1tPfR1CGmFcjJXEomvsSgUWlko5sP70vXyrYywZ3NQppRFtk7od3UVbvWlFvo9geV57SZ7XQ8XvSk58PqguTx9q1t2jliSkWdm~XW04K5iB4-uuksZv0-SazhtwqS4fijh8SRlctGEzqTCcFgOXSKqlLzG5zXdTJMaL4dOzrJCaejQlHsL~Fw__&Key-Pair-Id=APKAIYJRUKB5RLQWHZWQ","members":[{"user":{"id":7310741,"username":"Samir","email":"kachouri.samir@hotmail.com","color":"#02bcd4","profilePicture":null,"initials":"S","role":4,"custom_role":null,"last_active":"1632918513555","date_joined":"1632916441766","date_invited":"1632916356433"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":true,"can_edit_tags":false},{"user":{"id":7294462,"username":"Sabbir ahmed","email":"sabbir25112@gmail.com","color":"#795548","profilePicture":null,"initials":"SA","role":2,"custom_role":null,"last_active":"1633086064159","date_joined":"1632851964988","date_invited":"1632214174317"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"}},{"user":{"id":7296213,"username":"Primary Shetu","email":"primary.shetu@gmail.com","color":"#827718","profilePicture":null,"initials":"PS","role":2,"custom_role":null,"last_active":"1632851939470","date_joined":"1632214111702","date_invited":"1632214079619"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"}},{"user":{"id":7239479,"username":"Imed El Mokhtar","email":"imed.mokhtar@zerda.digital","color":"#e040fb","profilePicture":"https://attachments.clickup.com/profilePictures/7239479_WS3.jpg","initials":"IM","role":3,"custom_role":null,"last_active":"1633112350925","date_joined":"1629487422387","date_invited":"1629395534632"},"invited_by":{"id":1488092,"username":"Hanna Sebai","color":"#ffa12f","email":"hanna@zerda.digital","initials":"HS","profilePicture":"https://attachments.clickup.com/profilePictures/1488092_21A.jpg"}},{"user":{"id":14810786,"username":"Leo Occhiuzzi","email":"locchiuzzi@canderel.com","color":"#455963","profilePicture":null,"initials":"LO","role":4,"custom_role":null,"last_active":"1624434750327","date_joined":"1621357017757","date_invited":"1621352615762"},"invited_by":{"id":3003777,"username":"Sébastien Sylvestre","color":"#622aea","email":"sebastien@zerda.digital","initials":"SS","profilePicture":null},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":true,"can_edit_tags":false},{"user":{"id":12896082,"username":"Christian Charbonneau","email":"christian.charbonneau@nexafe.com","color":"#aa2fff","profilePicture":null,"initials":"CC","role":4,"custom_role":null,"last_active":"1622212574464","date_joined":"1617300883608","date_invited":"1617299832044"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":true,"can_edit_tags":false},{"user":{"id":12889466,"username":"Sirine Cherif","email":"sirine.cherif@zerda.digital","color":"#afb42b","profilePicture":"https://attachments.clickup.com/profilePictures/12889466_Z5e.jpg","initials":"SC","role":4,"custom_role":null,"last_active":"1633272143617","date_joined":"1617273733742","date_invited":"1617101776219"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":true,"can_edit_tags":false},{"user":{"id":8809812,"username":"salsabil","email":"salsabil.najjar@zerda.digital","color":"#e040fb","profilePicture":null,"initials":"S","role":3,"custom_role":null,"last_active":"1633126308238","date_joined":"1614596535506","date_invited":"1614349506305"},"invited_by":{"id":1488092,"username":"Hanna Sebai","color":"#ffa12f","email":"hanna@zerda.digital","initials":"HS","profilePicture":"https://attachments.clickup.com/profilePictures/1488092_21A.jpg"}},{"user":{"id":8726812,"username":"Ines Sakkat","email":"ines.sakkat@zerda.digital","color":"#0388d1","profilePicture":null,"initials":"IS","role":3,"custom_role":null,"last_active":"1633079680275","date_joined":"1612179202048","date_invited":"1612166055967"},"invited_by":{"id":1370944,"username":"Mahmoud Ben Aissa","color":"#3e2724","email":"mahmoud@zerda.digital","initials":"MA","profilePicture":"https://attachments.clickup.com/profilePictures/1370944_rRK.jpeg"}},{"user":{"id":10705226,"username":"Dominique Gauthier","email":"dominique@zerda.digital","color":"#5f81ff","profilePicture":null,"initials":"DG","role":4,"custom_role":null,"last_active":"1623263631126","date_joined":"1603294993732","date_invited":"1603287558873"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":true,"can_edit_tags":false},{"user":{"id":6647148,"username":"Younes Yahmed","email":"younes.yahmed@zerda.digital","color":"#3e2724","profilePicture":null,"initials":"YY","role":3,"custom_role":null,"last_active":"1633086237756","date_joined":"1603279454189","date_invited":"1603279008345"},"invited_by":{"id":1370944,"username":"Mahmoud Ben Aissa","color":"#3e2724","email":"mahmoud@zerda.digital","initials":"MA","profilePicture":"https://attachments.clickup.com/profilePictures/1370944_rRK.jpeg"}},{"user":{"id":10640364,"username":"Ahmed Nabli","email":"ahmed.nabli@zerda.store","color":"#ff7fab","profilePicture":"https://attachments.clickup.com/profilePictures/10640364_0Xt.jpg","initials":"AN","role":4,"custom_role":null,"last_active":"1633124562084","date_joined":"1600708940690","date_invited":"1600656932358"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":true,"can_edit_tags":false},{"user":{"id":6319204,"username":"Bernie Ann Busico","email":"bernie.busico@zerda.store","color":"#0ab4ff","profilePicture":null,"initials":"BB","role":4,"custom_role":null,"last_active":"1632969298800","date_joined":"1589411244894","date_invited":"1589409027334"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":null,"can_edit_tags":false},{"user":{"id":6309979,"username":"Ouss","email":"romdhaneoussama2@gmail.com","color":"#7b68ee","profilePicture":"https://attachments.clickup.com/profilePictures/6309979_39k.jpg","initials":"O","role":4,"custom_role":null,"last_active":"1606164127332","date_joined":"1588863186398","date_invited":"1588862485202"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":null,"can_edit_tags":false},{"user":{"id":4553193,"username":"Khouloud Bentardeit","email":"khouloud.bentardeit@zerda.digital","color":"#622aea","profilePicture":"https://attachments.clickup.com/profilePictures/4553193_f9W.jpg","initials":"KB","role":3,"custom_role":null,"last_active":"1633113576222","date_joined":"1583770829039","date_invited":"1583752553714"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"}},{"user":{"id":4417144,"username":"Mokrnai ilyes","email":"ilyess.mokrani@zerda.digital","color":"#02579b","profilePicture":null,"initials":"MI","role":4,"custom_role":null,"last_active":"1633285914408","date_joined":"1582550971863","date_invited":"1582544762524"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":null,"can_edit_tags":false},{"user":{"id":4395133,"username":"Oumaima","email":"oumaima.belatteg@zerda.digital","color":"#07a092","profilePicture":null,"initials":"O","role":4,"custom_role":null,"last_active":"1633284320968","date_joined":"1580890134839","date_invited":"1580874606142"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":null,"can_edit_tags":true},{"user":{"id":4368111,"username":"Amal Becha","email":"amal@zerda.digital","color":"#d60800","profilePicture":"https://attachments.clickup.com/profilePictures/4368111_hRd.jpg","initials":"AB","role":4,"custom_role":null,"last_active":"1633091690554","date_joined":"1578909505744","date_invited":"1578888050854"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":null,"can_edit_tags":true},{"user":{"id":2439715,"username":"Emna  zribi","email":"emna@zerda.digital","color":"#795548","profilePicture":null,"initials":"EZ","role":4,"custom_role":null,"last_active":"1633184538043","date_joined":"1572606683250","date_invited":"1572604064385"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":null,"can_edit_tags":true},{"user":{"id":4232288,"username":"Ali Gassab","email":"ali@zerda.store","color":"#0197a7","profilePicture":null,"initials":"AG","role":4,"custom_role":null,"last_active":"1633087945725","date_joined":"1570018787416","date_invited":"1565577919907"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":null,"can_edit_tags":false},{"user":{"id":3003777,"username":"Sébastien Sylvestre","email":"sebastien@zerda.digital","color":"#622aea","profilePicture":null,"initials":"SS","role":3,"custom_role":null,"last_active":"1633286042307","date_joined":"1564932088922","date_invited":"1564931800879"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"}},{"user":{"id":4203041,"username":"Nabil","email":"nabil@zerda.digital","color":"#08c7e0","profilePicture":null,"initials":"N","role":4,"custom_role":null,"last_active":"1633038291921","date_joined":"1562100823188","date_invited":"1562100745667"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":null,"can_edit_tags":true},{"user":{"id":4201340,"username":"Amira Br","email":"amira@zerda.digital","color":"#757380","profilePicture":"https://attachments.clickup.com/profilePictures/4201340_4bc.jpg","initials":"AB","role":4,"custom_role":null,"last_active":"1617692383650","date_joined":"1561979850785","date_invited":"1561978947759"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"},"can_see_time_spent":true,"can_see_time_estimated":true,"can_see_points_estimated":null,"can_edit_tags":false},{"user":{"id":1488092,"username":"Hanna Sebai","email":"hanna@zerda.digital","color":"#ffa12f","profilePicture":"https://attachments.clickup.com/profilePictures/1488092_21A.jpg","initials":"HS","role":2,"custom_role":null,"last_active":"1633024220226","date_joined":"1560774776186","date_invited":"1560737899900"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"}},{"user":{"id":313190,"username":"Samir Kachouri","email":"samir@zerda.digital","color":"#f42c2c","profilePicture":"https://attachments.clickup.com/profilePictures/313190_1R8.jpg","initials":"SK","role":3,"custom_role":null,"last_active":"1633018100703","date_joined":"1552479583875","date_invited":"1552336706277"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"}},{"user":{"id":1394007,"username":"Haithem Laabidi","email":"htm@zerda.digital","color":"#202020","profilePicture":"https://attachments.clickup.com/profilePictures/1394007_Yq8.jpeg","initials":"HL","role":2,"custom_role":null,"last_active":"1633102170709","date_joined":"1547793318882","date_invited":"1547060145784"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"}},{"user":{"id":1370944,"username":"Mahmoud Ben Aissa","email":"mahmoud@zerda.digital","color":"#3e2724","profilePicture":"https://attachments.clickup.com/profilePictures/1370944_rRK.jpeg","initials":"MA","role":2,"custom_role":null,"last_active":"1633266021221","date_joined":"1546351505632","date_invited":"1539869270961"},"invited_by":{"id":1370941,"username":"Chiheb Ben Aissa","color":"#02bcd4","email":"chiheb@zerda.digital","initials":"CA","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg"}},{"user":{"id":1370941,"username":"Chiheb Ben Aissa","email":"chiheb@zerda.digital","color":"#02bcd4","profilePicture":"https://attachments.clickup.com/profilePictures/1370941_Bm8.jpeg","initials":"CA","role":1,"custom_role":null,"last_active":"1633115681621","date_joined":"1539869270961","date_invited":"1539869270961"}}]}', true);
        $settings = Settings::clickup();
        $access_token = $settings->access_token;

        $api = env('CLICK_UP_BASE_URL') . '/team';

        $request = Http::withHeaders([
            'Authorization' => $access_token
        ])->get($api);

        if ($request->successful()) {
            $response = $request->json();
            $teams = $response['teams'] ?? [];
            return $teams[0] ?? [];
        }
        return [];
    }

    public static function getSpaces($teamId)
    {
        $settings = Settings::clickup();
        $access_token = $settings->access_token;

        $api = env('CLICK_UP_BASE_URL') . '/team/' . $teamId . '/space';
        $request = Http::withHeaders([
            'Authorization' => $access_token
        ])->get($api);

        if ($request->successful()) {
            dd($request->json());
        }
    }
}
